<html>
	<head>
		<title>SSH-Jeffrey Zhang</title>
		<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
		<script type="text/javascript" src="scripts/shCore.js"></script>
		<link type="text/css" href="css/main.css" rel="stylesheet"/>
		<script type="text/javascript" src="scripts/shBrushJScript.js"></script>
		<script type="text/javascript" src="scripts/shBrushPython.js"></script>
		<link type="text/css" rel="stylesheet" href="styles/shCoreDjango.css"/>
		<link type="text/css" rel="stylesheet" href="styles/shCore.css"/>
		<script type="text/javascript">SyntaxHighlighter.all();</script>
	</head>
	<body>
		<div id="wrapper">
			<header>
				<nav>
					<ul>
						<li class="first"><a title="Home" href="index.html">Home</a></li>
						<li><a title="Blog" href="diary/diary.html">Blog</a></li>
						<li class="actived"><a title="Wiki" href="index.html">Wiki</a></li>
						<li><a title="Twitter" href="https://twitter.com/GeassLei">Twitter</a></li>
						<li class="last"><a title="About Me" href="../resume/resume.html">README</a></li>
					</ul>
				</nav>
			</header>
			<article>

<h1 id="toc_1">SSH</h1>
<h2 id="toc_1.1">ssh代理与穿墙</h2>
<p>
用ssh命令开启本地端口的命令
</p>
<pre>
    ssh -qTfnN -D 7070 username@host
    -q :- be very quite, we are acting only as a tunnel.
    -T :- Do not allocate a pseudo tty, we are only acting a tunnel.
    -f :- move the ssh process to background, as we don’t want to interact with this ssh session directly.
    -N :- Do not execute remote command.
    -n :- redirect standard input to /dev/null.
</pre>
<p>
然后输入密码实现连接即可。远程主机不需要做任何处理。
然后在本地浏览器上设置代理，选择socket5（firefox等有选项），主机为localhost，端口为上面设置的7070。这样就可以通过代理上网了。
有些ssh连接可能有无操作的时效限制，为了实现断线后的自动连接，可以先实现免密码ssh登录，然后安装autossh用下面的命令连接：
</p>
<pre>
    autossh -M 2000 -N -D 127.0.0.1:8086 用户名@远程主机名 &amp;
</pre>
<p>
在“系统－会话（或者启动应用程序）”中添加这条命令可以实现开机自动执行。
</p>

<h2 id="toc_1.2">配置SSH快速启动</h2>
<p>
可以为每个SSH连接配置alias及属性信息，以快速连接。可以修改$HOME/.ssh/config文件来实现
</p>
<pre>
    hostname 190
        host 192.168.20.190
        username k4
</pre>
<p>
这样，在使用时只要简单的使用<code>ssh 190</code>就可以实现服务器的连接。该配置同样支持<code>scp</code>及<code>rsync</code>
</p>

<h2 id="toc_1.3">开启rsync的断点续传功能</h2>
<p>
<code>rsync</code>基于<code>ssh</code>的文件同步工具，他进行的是文件差异同步，因此在同步时速度很快。
默认情况下，他是没有开启断点续传功能的，想要开启该功能需要使用<code>--partial</code>参数。更简单的，在同步文件时，可以使用如下命令
</p>
<pre>
    rsync -avozP . 190:~/
</pre>
<h2 id="toc_1.4">免费SSH</h2>
<p>
<a href="http://xfeng.info/ssh">未知风</a>
</p>
	</article>
	<footer>
	</footer>
	</body>
</html>
